2.0 固定标签

case0: 2015	case1:2017	case2: 2013	case3: 2011 	case4: 2012-id.1=146   id.2=

##########################

要是不在prompt里说以病人为中心节点的话，建出的图就没有病人节点

##########################
1.有的节点会因为没有关系而被丢掉
因为prompt里说了仅提取有明显关系的关系

比如，从文本中来看，“normal bowel and bladder”（正常的肠道和膀胱功能）描述的是该患者没有出现恶心、呕吐等症状，且排便和排尿正常。
因此，这个实体是在描述患者的身体状况。

而“45-year-old male”是描述一个患者的基本信息，包括性别、年龄和就诊的原因。
两者之间并没有直接的因果关系，而是前者（正常的肠道和膀胱功能）作为描述患者健康状态的一部分，在整体上提供了更多关于该患者的临床背景。

因此，可以认为这两个实体没有直接的关系，它们是描述患者不同方面的健康状况或基本信息。

2.节点有100多个，可是关系少，建立出来的图只有50多个节点
##########更新##########
将“有明显关系”改成了“相关”，
#######################

neo4j只支持java17或java21，因此要设置环境变量：
    (crfenv) export JAVA_HOME=/mnt/diskb5/rongfeng_private/openlogic-openjdk-21.0.5+11-linux-x64
    (crfenv) export PATH=$JAVA_HOME/bin:$PATH
    (crfenv) ./neo4j status
    Neo4j is running at pid 180020

#######################
1整个chunk：达到输出能力限制，输出token卡在2000，节点关系都很少

分2个chunk：感觉达到输出能力限制了，第一个1083，第二个1586，48个节点，56个关系
    第二次，第一个chunk是905，第二个2409,33个节点，42个关系

分3个chunk：好一点，第一个chunk输出token是739，第二个1548，第三个2455，57个节点，76个关系
    第二次，第一个908，第二个1019，第三个2144，29个节点，37个关系

分4个chunk：第一个1010，第二个978，第三个1889，第四个1979，48个节点，81个关系
        第二次，第一个717，第二个955，第三个1333，第四个，1786，48个节点，81个关系

分5个chunk：第一个693，第二个699，第三个1342，第四个1243，第五个738，47个节点，83个关系

标签能否指定（一部分）？微软的做法是让llm对特定任务生成标签
可能需要标签词表加入prompt（包括实体标签、关系标签）又好像问题不大，如果后续做嵌入用bert的话
-> 要么做好embedding 要么严格限定好label

分几个chunk，怎么分 ？
report头部清洗应该到那一部分（introduction吗）
case和case之间（图与图之间）能不能做推理

变量：
llm温度、prompt、chunk数、重叠窗口大小

prompt的一些启示：
        1.先跨文档推断出可泛化的变量（也就是通用实体类型的识别）
        2.基于可泛化变量用LLM生成prompt（根据得到的通用实体类型生成CoT的prompt - GCoT）
Benchmarking Large Language Models on Communicative Medical
Coaching: A Dataset and a Novel System(ACL)

case report我觉得有两个层级：抽象概念知识、具体实体。

***可以先查找与当前chunk相关的实体，再注入prompt中。当前先直接注入整个实体集吧，因为文本量也不是很大，30多个实体而已***
